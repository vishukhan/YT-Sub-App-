<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ytSocial Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .hidden { display: none !important; }
        .active-tab { color: #8b5cf6; border-bottom: 2px solid #8b5cf6; }
        .drawer-shadow { background: rgba(0,0,0,0.5); }
        body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
    </style>
</head>
<body class="bg-gray-50 h-screen flex flex-col overflow-hidden">

    <div id="drawer-overlay" class="fixed inset-0 drawer-shadow z-[100] hidden transition-opacity"></div>
    <div id="drawer" class="fixed top-0 left-0 w-72 h-full bg-white z-[101] shadow-2xl transform -translate-x-full transition-transform duration-300">
        <div class="p-6 border-b flex items-center gap-3">
            <div class="w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center text-xl font-bold text-gray-600" id="userInitial">U</div>
            <div>
                <p class="font-bold text-sm" id="userEmailMenu">User Email</p>
                <p class="text-xs text-purple-600 font-medium">Free Member</p>
            </div>
        </div>
        <div class="p-2 space-y-1 overflow-y-auto h-[calc(100%-100px)]">
            <button class="w-full flex items-center gap-4 p-4 hover:bg-gray-50 rounded-xl text-sm"><i class="fas fa-shopping-cart text-purple-500"></i> Buy Points</button>
            <button class="w-full flex items-center gap-4 p-4 hover:bg-gray-50 rounded-xl text-sm"><i class="fas fa-crown text-yellow-500"></i> Become a VIP Member</button>
            <button class="w-full flex items-center gap-4 p-4 hover:bg-gray-50 rounded-xl text-sm"><i class="fas fa-cog text-gray-500"></i> Settings (Theme, Language)</button>
            <button class="w-full flex items-center gap-4 p-4 hover:bg-gray-50 rounded-xl text-sm"><i class="fas fa-shield-alt text-gray-500"></i> Privacy Policy</button>
            <button class="w-full flex items-center gap-4 p-4 hover:bg-gray-50 rounded-xl text-sm"><i class="fas fa-share-alt text-gray-500"></i> Share the App</button>
            <button class="w-full flex items-center gap-4 p-4 hover:bg-gray-50 rounded-xl text-sm"><i class="fas fa-star text-gray-500"></i> Rate the App</button>
            <button class="w-full flex items-center gap-4 p-4 hover:bg-gray-50 rounded-xl text-sm"><i class="fas fa-envelope text-gray-500"></i> Contact Us</button>
            <hr class="my-2">
            <button id="logoutBtn" class="w-full flex items-center gap-4 p-4 text-red-500 rounded-xl text-sm"><i class="fas fa-sign-out-alt"></i> Logout</button>
        </div>
    </div>

    <div id="app-container" class="flex flex-col h-full hidden">
        <header class="bg-white p-4 border-b flex justify-between items-center shrink-0">
            <div class="flex items-center gap-2">
                <i class="fab fa-youtube text-red-600 text-2xl"></i>
                <h1 class="font-bold text-lg">ytSocial</h1>
            </div>
            <div class="flex items-center gap-3">
                <div class="bg-purple-100 text-purple-700 px-4 py-1.5 rounded-full font-bold text-sm flex items-center gap-2">
                    <i class="fas fa-heart"></i> <span id="coinDisplay">0</span>
                </div>
                <button id="openMenu" class="w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center"><i class="fas fa-bars"></i></button>
            </div>
        </header>

        <main class="flex-1 overflow-y-auto p-4 pb-24">
            <div id="tab-watch" class="tab-pane space-y-4">
                <div class="bg-white rounded-[2rem] shadow-sm border overflow-hidden p-2">
                    <div class="aspect-video bg-black rounded-[1.5rem] overflow-hidden">
                        <iframe id="videoPlayer" class="w-full h-full" src="" frameborder="0"></iframe>
                    </div>
                    <div class="grid grid-cols-2 divide-x border-t mt-4 py-6">
                        <div class="text-center">
                            <h2 class="text-3xl font-black" id="earnPoints">48</h2>
                            <p class="text-[10px] uppercase font-bold text-gray-400">Points</p>
                        </div>
                        <div class="text-center">
                            <h2 class="text-3xl font-black" id="timer">60</h2>
                            <p class="text-[10px] uppercase font-bold text-gray-400">Seconds</p>
                        </div>
                    </div>
                    <button class="w-full bg-zinc-900 text-white py-5 rounded-3xl font-bold mb-2 shadow-lg active:scale-95 transition-all">NEXT VIDEO</button>
                </div>
            </div>

            <div id="tab-campaign" class="tab-pane hidden space-y-4">
                <div class="bg-white p-6 rounded-[2rem] border shadow-sm">
                    <h3 class="font-bold mb-4 text-lg">New Campaign</h3>
                    <input id="campaignLink" type="text" placeholder="YouTube Video URL" class="w-full p-4 bg-gray-50 border rounded-2xl mb-4 outline-none focus:border-purple-500">
                    <button id="createCampaignBtn" class="w-full bg-red-600 text-white py-4 rounded-2xl font-bold shadow-xl shadow-red-100">Add Order (500 ❤️)</button>
                </div>
                <div id="myCampaigns" class="space-y-3">
                    <p class="text-xs font-bold text-gray-400 uppercase ml-2">Your Orders</p>
                </div>
            </div>
        </main>

        <nav class="fixed bottom-0 w-full bg-white border-t flex justify-around p-2 pb-4 shadow-[0_-5px_15px_rgba(0,0,0,0.05)]">
            <button onclick="showTab('campaign', this)" class="flex flex-col items-center gap-1 p-2 text-gray-400"><i class="fas fa-bullhorn"></i><span class="text-[10px] font-bold">Campaign</span></button>
            <button onclick="showTab('watch', this)" class="flex flex-col items-center gap-1 p-2 active-tab"><i class="fas fa-play-circle"></i><span class="text-[10px] font-bold">Watch</span></button>
            <button class="flex flex-col items-center gap-1 p-2 text-gray-400"><i class="fas fa-users"></i><span class="text-[10px] font-bold">Subscribe</span></button>
            <button class="flex flex-col items-center gap-1 p-2 text-gray-400"><i class="fas fa-thumbs-up"></i><span class="text-[10px] font-bold">Like</span></button>
        </nav>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDFsJQ0qvcl8qATznqVedjzGI5RZvhe07U",
            authDomain: "yt-sub-b5356.firebaseapp.com",
            projectId: "yt-sub-b5356",
            storageBucket: "yt-sub-b5356.firebasestorage.app",
            messagingSenderId: "61877253734",
            appId: "1:61877253734:web:45e16188720b34f1aadfa7"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // Sidebar & Tab Logic
        const drawer = document.getElementById('drawer');
        const overlay = document.getElementById('drawer-overlay');
        
        document.getElementById('openMenu').onclick = () => {
            drawer.style.transform = 'translateX(0)';
            overlay.classList.remove('hidden');
        };

        overlay.onclick = () => {
            drawer.style.transform = 'translateX(-100%)';
            overlay.classList.add('hidden');
        };

        window.showTab = (tabId, btn) => {
            document.querySelectorAll('.tab-pane').forEach(t => t.classList.add('hidden'));
            document.getElementById(`tab-${tabId}`).classList.remove('hidden');
            document.querySelectorAll('nav button').forEach(b => b.classList.remove('active-tab', 'text-gray-400'));
            btn.classList.add('active-tab');
        };

        onAuthStateChanged(auth, async (user) => {
            if (user) {
                document.getElementById('app-container').classList.remove('hidden');
                document.getElementById('userEmailMenu').innerText = user.email;
                document.getElementById('userInitial').innerText = user.email[0].toUpperCase();
                
                const userSnap = await getDoc(doc(db, "users", user.uid));
                if(userSnap.exists()) {
                    document.getElementById('coinDisplay').innerText = userSnap.data().Coins;
                }
            } else {
                // Show your login screen here
                window.location.href = "login.html"; // Optional redirection
            }
        });

        document.getElementById('logoutBtn').onclick = () => signOut(auth).then(() => location.reload());
    </script>
</body>
</html>
